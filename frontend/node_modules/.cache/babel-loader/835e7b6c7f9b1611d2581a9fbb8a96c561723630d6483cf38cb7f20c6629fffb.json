{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./Profile.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=()=>{const[currentUser,setCurrentUser]=useState({});const[updatedUser,setUpdatedUser]=useState({});const[isEditing,setIsEditing]=useState(false);useEffect(()=>{fetchCurrentUser();},[]);const fetchCurrentUser=async()=>{try{const token=localStorage.getItem('auth-token');if(token){const response=await fetch('http://localhost:4000/currentuser',{method:'GET',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});const responseData=await response.json();if(responseData.success){setCurrentUser(responseData.user);}else{console.error('Error fetching current user:',responseData.errors);}}}catch(error){console.error('Error fetching current user:',error);}};const handleInputChange=e=>{setUpdatedUser(prevUpdatedUser=>({...prevUpdatedUser,[e.target.name]:e.target.value}));};const handleSave=async()=>{try{const token=localStorage.getItem('auth-token');console.log(\"Inside handle save : \");console.log(updatedUser);if(token){const response=await fetch('http://localhost:4000/updateuser',{method:'POST',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify(updatedUser)});const responseData=await response.json();if(responseData.success){setIsEditing(false);fetchCurrentUser();// Refresh user details after the update\n}else{console.error('Error updating user details:',responseData.errors);}}}catch(error){console.error('Error updating user details:',error);}};return/*#__PURE__*/_jsx(\"div\",{className:\"profile\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-details\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Enter your name\",value:isEditing?updatedUser.name||'':(currentUser===null||currentUser===void 0?void 0:currentUser.name)||'',onChange:handleInputChange,disabled:!isEditing}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",value:(currentUser===null||currentUser===void 0?void 0:currentUser.email)||'',disabled:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",placeholder:\"Address\",value:isEditing?updatedUser.address||'':(currentUser===null||currentUser===void 0?void 0:currentUser.address)||'',onChange:handleInputChange,disabled:!isEditing}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"contact\",placeholder:\"Phone No.\",value:isEditing?updatedUser.contact||'':(currentUser===null||currentUser===void 0?void 0:currentUser.contact)||'',onChange:handleInputChange,disabled:!isEditing})]}),isEditing?/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,children:\"Save\"}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setUpdatedUser({...currentUser});setIsEditing(true);},children:\"Edit\"})]})});};export default Profile;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Profile","currentUser","setCurrentUser","updatedUser","setUpdatedUser","isEditing","setIsEditing","fetchCurrentUser","token","localStorage","getItem","response","fetch","method","headers","concat","responseData","json","success","user","console","error","errors","handleInputChange","e","prevUpdatedUser","target","name","value","handleSave","log","body","JSON","stringify","className","children","type","placeholder","onChange","disabled","email","address","contact","onClick"],"sources":["C:/Users/ABHISHEK TRIVEDI/Desktop/program codes/east_west_aid-master/frontend/src/Components/Profile/Profile.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './Profile.css';\n\nconst Profile = () => {\n  const [currentUser, setCurrentUser] = useState({});\n  const [updatedUser, setUpdatedUser] = useState({});\n  const [isEditing, setIsEditing] = useState(false);\n\n  useEffect(() => {\n    fetchCurrentUser();\n  }, []);\n\n  const fetchCurrentUser = async () => {\n    try {\n      const token = localStorage.getItem('auth-token');\n\n      if (token) {\n        const response = await fetch('http://localhost:4000/currentuser', {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json',\n          },\n        });\n\n        const responseData = await response.json();\n\n        if (responseData.success) {\n          setCurrentUser(responseData.user);\n        } else {\n          console.error('Error fetching current user:', responseData.errors);\n        }\n      }\n    } catch (error) {\n      console.error('Error fetching current user:', error);\n    }\n  };\n\n  const handleInputChange = (e) => {\n    setUpdatedUser((prevUpdatedUser) => ({\n      ...prevUpdatedUser,\n      [e.target.name]: e.target.value,\n    }));\n  };\n  \n\n  const handleSave = async () => {\n    try {\n      const token = localStorage.getItem('auth-token');\n\n      console.log(\"Inside handle save : \");\n      console.log(updatedUser);\n\n      if (token) {\n        const response = await fetch('http://localhost:4000/updateuser', {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(updatedUser),\n        });\n\n        const responseData = await response.json();\n\n        if (responseData.success) {\n          setIsEditing(false);\n          fetchCurrentUser(); // Refresh user details after the update\n        } else {\n          console.error('Error updating user details:', responseData.errors);\n        }\n      }\n    } catch (error) {\n      console.error('Error updating user details:', error);\n    }\n  };\n\n  return (\n    <div className='profile'>\n      <div className='profile-container'>\n        <h1>My Profile</h1>\n        <div className='profile-details'>\n          <input\n            type='text'\n            name='name'\n            placeholder='Enter your name'\n            value={isEditing ? updatedUser.name || '' : currentUser?.name || ''}\n            onChange={handleInputChange}\n            disabled={!isEditing}\n          />\n          <input\n            type='email'\n            name='email'\n            placeholder='Email'\n            value={currentUser?.email || ''}\n            disabled\n          />\n          <input\n            type='text'\n            name='address'\n            placeholder='Address'\n            value={isEditing ? updatedUser.address || '' : currentUser?.address || ''}\n            onChange={handleInputChange}\n            disabled={!isEditing}\n          />\n          <input\n            type='tel'\n            name='contact'\n            placeholder='Phone No.'\n            value={isEditing ? updatedUser.contact || '' : currentUser?.contact || ''}\n            onChange={handleInputChange}\n            disabled={!isEditing}\n          />\n        </div>\n        {isEditing ? (\n          <button onClick={handleSave}>Save</button>\n        ) : (\n          <button onClick={() => {\n            setUpdatedUser({ ...currentUser });\n            setIsEditing(true);\n          }}>Edit</button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}